(this["webpackJsonpclient-app"]=this["webpackJsonpclient-app"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),i=n(8),o=n.n(i),s=(n(13),n(3)),l=n(4),c=n(2),h=n(6),u=n(5),d=(n(14),n(0)),b=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleChange=a.handleChange.bind(Object(c.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(c.a)(a)),a}return Object(l.a)(n,[{key:"handleChange",value:function(e){this.props.onChange(e.target.value)}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.onSubmit()}},{key:"render",value:function(){return Object(d.jsxs)("form",{action:"",method:"get",onSubmit:this.handleSubmit,children:[Object(d.jsxs)("label",{htmlFor:"collabora-online-server",children:["Collabora Online Server:",Object(d.jsx)("input",{type:"text",value:this.props.address,onChange:this.handleChange})]}),Object(d.jsx)("input",{type:"submit",value:"Load Collabora Online"})]})}}]),n}(r.a.Component),p=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).formElem=void 0,a.formElem=r.a.createRef(),a}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.formElem.current&&this.formElem.current.submit()}},{key:"render",value:function(){return Object(d.jsx)("div",{style:{display:"none"},children:Object(d.jsxs)("form",{ref:this.formElem,action:this.props.url,encType:"multipart/form-data",method:"post",target:"collabora-online-viewer",id:"collabora-submit-form",children:[Object(d.jsx)("input",{name:"access_token",value:this.props.token,type:"hidden",id:"access-token"}),Object(d.jsx)("input",{type:"submit",value:""})]})})}}]),n}(r.a.Component),m=function(e){Object(h.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(s.a)(this,n),(a=t.call(this,e)).handleInputChanged=a.handleInputChanged.bind(Object(c.a)(a)),a.handleSubmit=a.handleSubmit.bind(Object(c.a)(a)),a.state={serverAddress:"",startLoading:!1,wopiUrl:"",token:""},a}return Object(l.a)(n,[{key:"handleInputChanged",value:function(e){this.setState({serverAddress:e})}},{key:"handleSubmit",value:function(){var e=this,t=window.location.origin,n=t.startsWith("https")?"https":"http",a=this.state.serverAddress;if(a)if(a.startsWith("http"))if(a.startsWith(n+"://")){var r="".concat(t,"/wopi/files/1");fetch("/collaboraUrl?server=".concat(a)).then((function(e){return e.json()})).then((function(t){var n=t.url,a=t.token,i="".concat(n,"WOPISrc=").concat(r);console.log("wopiUrl: ".concat(i)),e.setState({startLoading:!0,wopiUrl:i,token:a})}))}else alert("Collabora Online server address scheme does not match the current page url scheme");else alert("Warning! You have to specify the scheme protocol too (http|https) for the server address.");else alert("No server address entered")}},{key:"componentDidUpdate",value:function(){this.state.startLoading&&this.setState({startLoading:!1})}},{key:"render",value:function(){var e;return this.state.startLoading&&(e=Object(d.jsx)(p,{url:this.state.wopiUrl,token:this.state.token})),Object(d.jsxs)("div",{className:"App",children:[Object(d.jsx)(b,{address:this.state.serverAddress,onChange:this.handleInputChanged,onSubmit:this.handleSubmit}),e,Object(d.jsx)("iframe",{title:"Collabora Online Viewer",id:"collabora-online-viewer",name:"collabora-online-viewer"})]})}}]),n}(r.a.Component);o.a.render(Object(d.jsx)(r.a.StrictMode,{children:Object(d.jsx)(m,{})}),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.48e34aaf.chunk.js.map